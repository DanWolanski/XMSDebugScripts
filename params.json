{
  "name": "Xmsdebugscripts",
  "tagline": "This is a set of scripts and debug tools that can be used to troubleshoot XMS Support issues",
  "body": "# XMSDebugScripts\r\nThis is a set of scripts and debug tools that can be used to troubleshoot XMS Support issues\r\nXMSInfo / XMSInfo_lite\r\n    These are two scripts that can be used to assist in collecting data for new issues or as part of regular checkups on the system.\r\n    The main difference in the two is that the lite script will not pull all of the WebUI data and will not include several of the XMS/Dialogic logs. This was done to speed up collection time and filesize.\r\n    To run just run the executable\r\n    ./xmsinfo.sh\r\n    ./xmsinfo_lite.sh\r\n    Each will make a tgz with the output. You can find some useful system level information in the additionalinfo.out, some performance data in the toplog.out or the the sar.out. You can get some details on cache size and media files. Lastly you can get the messages file for offline review\r\n\r\nMONITOR\r\n    This script will monitor system performance and usage information. This can be used as a check console, or it can be let running and save the data to file\r\n    To view in window just run\r\n    ./monitor.sh\r\n    To save to file run via\r\n    nohup ./monitor.sh > /dev/null &\r\n    In this mode it will keep 3 days worth of performance data\r\n\r\nGenXMSCores\r\n    This will force the cores for all the XMS processes and HMP core components.\r\n    This can be used to collect state in case of hang or state issue.\r\n    This can be run directly\r\n    ./genXMSCores.sh\r\n    You should also include xmsinfo and monitor output if possible with the cores.\r\n\r\nFailureWatchdog\r\n    This script will monitor for several error conditions.  It will then restart and/or collect data automaticly\r\n\r\nScript-gracefulRestart/Shutdown\r\n    These are a set of scripts that can be used to shutdown/restart the services gracefully\r\n    The scripts will\r\n    1-Reset the Graceful shutdown timer\r\n    2-Issue CURL to set XMS out of service\r\n    3-Wait for system to stop\r\n    4-stop the nodecontroller\r\n    5-clear out the cache files\r\n    (6)-restart the services\r\n    Note: Shutdown doesn't include 6, but includes others\r\n    These scripts are used in a number of ways. They are used by the tech team to shudown and restart the servers. Also, they are used via the watchdog timer.\r\n    To use just call it from the shell\r\n    ./gracefulShutdown.sh\r\n\r\nClearandDisable File Cache\r\n    Script to clear out the files left in the cache by crashes and other tasks. This will also disable the http caching.\r\n    Was used to work around the delay in playback issue. Cache should remain disabled and clear is not baked into the gracefulRestart scripts. However, mentioning it for historical resons in case they startup a new MRF\r\n    To run execute\r\n    ./clearanddisable.sh\r\n\r\nErrorAndRestart Checker\r\n    This script is used to search though the messages file for error triggers and report them.\r\n    One and done errors (seen once indicates errors)\r\n    -\r\n    Threshold errors where you need x in y messages to trigger\r\n    -\r\n    Watch strings that will report but not count as error\r\n    -\r\n    Restart counters\r\n    -\r\n    It supports a few different types of detects\r\n    To run this you can just issue\r\n    ./errorandrestartchecker.pl var/log/messages\r\n    The output looks like this\r\n    Opening pvm1mrf1\\var\\log\\messages-20160501 for parsing....\r\n    Apr 25 18:38:29 pvm1mrf1 -Error Detected via threshold\r\n    Apr 25 19:41:53 pvm1mrf1 -Restart detected (Recovering from Error)\r\n    Apr 27 23:02:17 pvm1mrf1 -Restart detected (NOT restarting due to Error)\r\n    Apr 27 23:10:40 pvm1mrf1 -Restart detected (NOT restarting due to Error)\r\n    Apr 29 13:54:11 pvm1mrf1 -Restart detected (NOT restarting due to Error)\r\n    Apr 29 21:18:44 pvm1mrf1 -Error Detected via ADEC<1142> could not write packet\r\n    Apr 30 09:52:09 pvm1mrf1 -Restart detected (Recovering from Error)\r\n    Apr 30 20:50:20 pvm1mrf1 -Error Detected via threshold\r\n    Apr 30 21:34:02 pvm1mrf1 -Restart detected (Recovering from Error)\r\n    230218 lines parsed\r\n    SNMP trap count = 59\r\n    Watch count = 0\r\n    Fail count = 3\r\n    Recovery count = 0\r\n    Restart count = 6\r\n    Current state is NO ERROR\r\n    \r\n    \r\nAppman Log Parser\r\n    This script will search though appman for any list of regex strings. Then call sessions that match that string will be separated out into their own file.\r\n    You can quickly extract call flows based on callID, error codes, filenames etc\r\n    Note running with no command line args will break the file up in to all the sessions in their own file. If you do this for production logs you will generate thousands of files\r\n    Ex, say you see an error in call ID 6e76335c-7e0c-4485-bccc-5845d8e53764, calling\r\n    appmanLogExtractor.pl 6e76335c-7e0c-4485-bccc-5845d8e53764\r\n    Simarly you can put multiple call ids, error codes to match (they are or relationship).\r\n    This is good if you have a failed file you want to check where it was from, trace call IDs, pull out all calls with same error etc.\r\n\r\nDump WebUI\r\n    This script will dump out the contents of the WebUI via the REST API\r\n    \r\ngenbtfromcores\r\n    This can be executed to automaticly generate the Backtrace from the a collection of cores.  This is useful to run to provide some information if the core files are too large to transfer\r\n    \r\nMatcher\r\n    This script will match 2 strings keeping a running total of the count.  Useful for determining leaks and matching starts/stops, opens closed etc\r\n    \r\nAutoGenComments\r\n    This will search though a log and highlight frequently viewed content\r\n    \r\nAutoPullComments\r\n    This will extract the comments from the autoGenComments of ones that are hand tagged\r\n    \r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}